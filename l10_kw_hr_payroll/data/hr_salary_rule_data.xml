<odoo>
    <data noupdate="1">
        <!--record id="kuwait_housing_allowance_salary_rule" model="hr.salary.rule">
            <field name="name">Housing Allowance</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="code">HOUALLOW</field>
            <field name="sequence">5</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.l10n_kw_housing_allowance</field>
            <field name="struct_id" ref="l10n_kw_hr_payroll.kuwait_employee_payroll_structure"/>
        </record>
        <record id="kuwait_transportation_allowance_salary_rule" model="hr.salary.rule">
            <field name="name">Transportation Allowance</field>
            <field name="category_id" ref="hr_payroll.ALW"/>
            <field name="code">TRAALLOW</field>
            <field name="sequence">5</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.l10n_kw_transportation_allowance</field>
            <field name="struct_id" ref="l10n_kw_hr_payroll.kuwait_employee_payroll_structure"/>
        </record-->
        <record id="kuwait_basic_salary_rule" model="hr.salary.rule">
            <field name="name">BASIC</field>
            <field name="category_id" ref="hr_payroll.BASIC"/>
            <field name="code">BASIC</field>
            <field name="sequence">5</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
day_rate = float( contract.wage /26 )
hour_rate = float(day_rate / 8)
unpaid_hours = sum([line.number_of_hours for line in payslip.worked_days_line_ids if line.work_entry_type_id.id in payslip.struct_id.unpaid_work_entry_type_ids.ids ])
result = contract.wage - (unpaid_hours * hour_rate )
            </field>
            <field name="struct_id" ref="l10n_kw_hr_payroll.kuwait_employee_payroll_structure"/>
        </record>
        <record id="kuwait_accrude_annual_leaves_salary_rule" model="hr.salary.rule">
            <field name="name">Accrude Annual Leaves</field>
            <field name="category_id" ref="hr_payroll.Other"/>
            <field name="code">AAL</field>
            <field name="sequence">5</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
start_date = contract.first_contract_date
end_date = contract.date_end
day_rate = float( contract.wage /26 )
hour_rate = float(day_rate / 8)
difference = ((end_date-start_date).days/365)*30
result = day_rate  * difference
            </field>
            <field name="struct_id" ref="l10n_kw_hr_payroll.kuwait_employee_payroll_structure"/>
        </record>
        <record id="kuwait_end_of_service_salary_rule" model="hr.salary.rule">
            <field name="name">End Of Service</field>
            <field name="category_id" ref="hr_payroll.Other"/>
            <field name="code">EOS</field>
            <field name="sequence">80</field>
            <!--field name="condition_select">python</field>
            <field name="condition_python">result = not employee.active and employee.departure_reason_id</field-->
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
start_date = contract.first_contract_date
end_date = contract.date_end
day_rate = float( contract.wage /26 )
worked_days = (end_date-start_date).days
worked_rate = float(worked_days /365)
eos=0
#before 3 years if retired to_add condition if he's retired eos=0 
if worked_rate &lt;=5 :
    eos = worked_rate  * 15 * day_rate

#after 3 years 
#add in case he retired he get 7.5 days else 15 days foreach year

# After 5 years
if worked_rate >5:
    ra = worked_rate -5
    eos= (75 * day_rate )+ (contract.wage*ra)
result = eos
                
</field>
            <field name="struct_id" ref="l10n_kw_hr_payroll.kuwait_employee_payroll_structure"/>
        </record>
        <!--record id="kuwait_end_of_service_provision_salary_rule" model="hr.salary.rule">
            <field name="name">End of Service Provision</field>
            <field name="category_id" ref="hr_payroll.COMP"/>
            <field name="code">EOSP</field>
            <field name="appears_on_payslip">False</field>
            <field name="sequence">90</field>
            <field name="condition_select">python</field>
            <field name="condition_python">result = employee.active</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = (contract.l10n_kw_number_of_days / 12) * (contract.wage / 30)</field>
            <field name="struct_id" ref="l10n_kw_hr_payroll.kuwait_employee_payroll_structure"/>
        </record-->
    </data>
</odoo>
